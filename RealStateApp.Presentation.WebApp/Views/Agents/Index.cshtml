@using RealStateApp.Core.Application.ViewModels
@model List<UserViewModel>

@{
    ViewData["Title"] = "Agentes";
    Layout = ViewBag.isClient ? "_ClientLayout" : "_GeneralLayout";
}

<!-- Banner con overlay y título -->
<div class="position-relative mb-4">
    <img src="https://t4.ftcdn.net/jpg/00/97/87/09/360_F_97870953_V0Aq7dhJp2reT1GsGXy0vI2fdazTC9IX.jpg" class="img-fluid w-100" style="max-height:250px; object-fit:cover;" alt="Banner" />
    <div class="position-absolute top-0 start-0 w-100 h-100" style="background-color: rgba(0,0,0,0.4);"></div>
    <div class="position-absolute top-50 start-50 translate-middle text-white text-center">
        <h2 class="fw-bold">Listado de agentes</h2>
    </div>
</div>

<div class="container mb-4">
    <div class="row">
        <div class="col-auto">
            <form method="get" asp-action="Index" class="d-flex">
                <input type="text" name="agentName" value="@Context.Request.Query["search"]"
                       class="form-control form-control-sm me-2" placeholder="Buscar agente..." />
                <button type="submit" class="btn btn-primary btn-sm">
                    <i class="bi bi-search"></i> <!-- Bootstrap Icons lupa -->
                </button>
            </form>
        </div>
    </div>
</div>

<div class="row">
    @if (Model != null && Model.Any())
    {
        @foreach (var agent in Model)
        {
            <div class="col-6 col-md-3 mb-4">
                <a asp-controller="Property" asp-action="agentProperties" asp-route-agentId="@agent.Id"asp-route-isClient="@ViewBag.IsClient" class="text-decoration-none">
                    <div class="card border rounded shadow-sm h-100 hover-shadow" style="transition: transform 0.2s;">
                        <!-- Foto circular y ajustada -->
                        <div class="d-flex justify-content-center mt-3">
                            <img src="@agent.PhotoPath"
                                 class="rounded-circle border border-light"
                                 alt="@agent.FirstName"
                                 style="width:120px; height:120px; object-fit:cover;" />
                        </div>

                        <div class="card-body p-2 text-center">
                            <h6 class="fw-bold mb-2 text-dark">
                                @agent.FirstName @agent.LastName
                            </h6>
                        </div>
                    </div>
                </a>
            </div>

        }
    }
    else
    {
        <div class="col-12">
            <p class="text-center text-muted fw-bold mt-4">
                No se encontraron agentes disponibles.
            </p>
        </div>
    }
</div>

